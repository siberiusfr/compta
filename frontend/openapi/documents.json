{"openapi":"3.1.0","info":{"title":"Document Service API","description":"Service de gestion des documents - Upload, versioning, partage et métadonnées. Toutes les requêtes passent via la Gateway.","contact":{"name":"COMPTA Team","email":"support@compta.tn"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8080/doc","description":"API Gateway"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"Categories","description":"Document category management endpoints"},{"name":"Tags","description":"Document tag management endpoints"},{"name":"Document Sharing","description":"Document sharing management endpoints"},{"name":"Document Versions","description":"Document version management endpoints"},{"name":"Documents","description":"Document management endpoints"}],"paths":{"/api/documents/{id}":{"get":{"tags":["Documents"],"summary":"Get document by ID","description":"Returns document details including tags and metadata","operationId":"getById","parameters":[{"name":"id","in":"path","description":"Document ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Document found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentResponse"}}}},"404":{"description":"Document not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentResponse"}}}}}},"put":{"tags":["Documents"],"summary":"Update document metadata","description":"Updates document metadata (not the file)","operationId":"update","parameters":[{"name":"id","in":"path","description":"Document ID","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentUpdateRequest"}}},"required":true},"responses":{"200":{"description":"Document updated successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentResponse"}}}},"400":{"description":"Invalid request data","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentResponse"}}}},"404":{"description":"Document not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentResponse"}}}}}},"delete":{"tags":["Documents"],"summary":"Delete a document","description":"Deletes a document and its file from storage","operationId":"delete","parameters":[{"name":"id","in":"path","description":"Document ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Document deleted successfully"},"404":{"description":"Document not found"}}}},"/api/documents/{id}/metadata":{"get":{"tags":["Documents"],"summary":"Get document metadata","description":"Returns custom metadata for a document","operationId":"getMetadata","parameters":[{"name":"id","in":"path","description":"Document ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Metadata","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}},"404":{"description":"Document not found","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}},"put":{"tags":["Documents"],"summary":"Set document metadata","description":"Sets custom metadata key-value pairs","operationId":"setMetadata","parameters":[{"name":"id","in":"path","description":"Document ID","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MetadataRequest"}}},"required":true},"responses":{"200":{"description":"Metadata updated","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}},"404":{"description":"Document not found","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/api/documents/shares/{shareId}":{"put":{"tags":["Document Sharing"],"summary":"Update a share","description":"Updates share permission or expiration","operationId":"update_1","parameters":[{"name":"shareId","in":"path","description":"Share ID","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentShareRequest"}}},"required":true},"responses":{"200":{"description":"Share updated successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentShareResponse"}}}},"404":{"description":"Share not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentShareResponse"}}}}}},"delete":{"tags":["Document Sharing"],"summary":"Revoke a share","description":"Revokes document sharing","operationId":"revoke","parameters":[{"name":"shareId","in":"path","description":"Share ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Share revoked successfully"},"404":{"description":"Share not found"}}}},"/api/categories/{id}":{"get":{"tags":["Categories"],"summary":"Get a category by ID","description":"Returns a category with its sub-categories","operationId":"getById_1","parameters":[{"name":"id","in":"path","description":"Category ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Category found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CategoryResponse"}}}},"404":{"description":"Category not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CategoryResponse"}}}}}},"put":{"tags":["Categories"],"summary":"Update a category","description":"Updates an existing category","operationId":"update_2","parameters":[{"name":"id","in":"path","description":"Category ID","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryRequest"}}},"required":true},"responses":{"200":{"description":"Category updated successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CategoryResponse"}}}},"400":{"description":"Invalid request data","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CategoryResponse"}}}},"404":{"description":"Category not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CategoryResponse"}}}}}},"delete":{"tags":["Categories"],"summary":"Delete a category","description":"Deletes a category if it has no sub-categories","operationId":"delete_1","parameters":[{"name":"id","in":"path","description":"Category ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Category deleted successfully"},"400":{"description":"Category has sub-categories"},"404":{"description":"Category not found"}}}},"/api/tags":{"get":{"tags":["Tags"],"summary":"Get all tags","description":"Returns all tags, optionally filtered by search query","operationId":"getAll","parameters":[{"name":"search","in":"query","description":"Search query","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"List of tags","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/TagResponse"}}}}}}},"post":{"tags":["Tags"],"summary":"Create a new tag","description":"Creates a new document tag","operationId":"create","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TagRequest"}}},"required":true},"responses":{"201":{"description":"Tag created successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TagResponse"}}}},"400":{"description":"Invalid request data","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TagResponse"}}}},"409":{"description":"Tag with this name already exists","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TagResponse"}}}}}}},"/api/documents":{"get":{"tags":["Documents"],"summary":"Get all documents","description":"Returns all documents","operationId":"getAll_1","responses":{"200":{"description":"List of documents","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DocumentResponse"}}}}}}},"post":{"tags":["Documents"],"summary":"Upload a document","description":"Uploads a new document to the storage","operationId":"upload","requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary","description":"File to upload"},"data":{"$ref":"#/components/schemas/DocumentUploadRequest"}},"required":["data","file"]}}}},"responses":{"201":{"description":"Document uploaded successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentResponse"}}}},"400":{"description":"Invalid request data","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentResponse"}}}},"404":{"description":"Category not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentResponse"}}}}}}},"/api/documents/{documentId}/versions":{"get":{"tags":["Document Versions"],"summary":"Get all versions","description":"Returns all versions of a document","operationId":"getVersions","parameters":[{"name":"documentId","in":"path","description":"Document ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"List of versions","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DocumentVersionResponse"}}}}},"404":{"description":"Document not found","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DocumentVersionResponse"}}}}}}},"post":{"tags":["Document Versions"],"summary":"Upload new version","description":"Uploads a new version of a document","operationId":"uploadVersion","parameters":[{"name":"documentId","in":"path","description":"Document ID","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary","description":"New file version"},"data":{"$ref":"#/components/schemas/DocumentVersionUploadRequest"}},"required":["file"]}}}},"responses":{"201":{"description":"Version uploaded successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentVersionResponse"}}}},"404":{"description":"Document not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentVersionResponse"}}}}}}},"/api/documents/{documentId}/shares":{"get":{"tags":["Document Sharing"],"summary":"Get document shares","description":"Returns all shares for a document","operationId":"getSharesByDocument","parameters":[{"name":"documentId","in":"path","description":"Document ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"List of shares","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DocumentShareResponse"}}}}},"404":{"description":"Document not found","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DocumentShareResponse"}}}}}}},"post":{"tags":["Document Sharing"],"summary":"Share a document","description":"Shares a document with another user","operationId":"share","parameters":[{"name":"documentId","in":"path","description":"Document ID","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentShareRequest"}}},"required":true},"responses":{"201":{"description":"Document shared successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentShareResponse"}}}},"400":{"description":"Invalid request or already shared","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentShareResponse"}}}},"404":{"description":"Document not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentShareResponse"}}}}}}},"/api/documents/shares/cleanup":{"post":{"tags":["Document Sharing"],"summary":"Cleanup expired shares","description":"Removes all expired document shares","operationId":"cleanupExpiredShares","responses":{"200":{"description":"Number of cleaned up shares","content":{"*/*":{"schema":{"type":"integer","format":"int32"}}}}}}},"/api/documents/search":{"get":{"tags":["Documents"],"summary":"Search documents (GET)","description":"Searches documents by query parameters","operationId":"searchGet","parameters":[{"name":"query","in":"query","description":"Search query","required":false,"schema":{"type":"string"}},{"name":"categoryId","in":"query","description":"Category ID","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"uploadedBy","in":"query","description":"Uploader user ID","required":false,"schema":{"type":"string"}},{"name":"tag","in":"query","description":"Tag name","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"Search results","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DocumentResponse"}}}}}}},"post":{"tags":["Documents"],"summary":"Search documents","description":"Searches documents by various criteria","operationId":"search","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DocumentSearchRequest"}}},"required":true},"responses":{"200":{"description":"Search results","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DocumentResponse"}}}}}}}},"/api/categories":{"get":{"tags":["Categories"],"summary":"Get all categories","description":"Returns a flat list of all categories","operationId":"getAll_2","responses":{"200":{"description":"List of categories","content":{"*/*":{"schema":{"type":"array","items":{"type":"object","description":"Category response","properties":{"id":{"type":"integer","format":"int64","description":"Category ID","example":1},"name":{"type":"string","description":"Category name","example":"Comptabilité"},"description":{"type":"string","description":"Category description","example":"Documents comptables et financiers"},"parentCategoryId":{"type":"integer","format":"int64","description":"Parent category ID","example":null},"parentCategoryName":{"type":"string","description":"Parent category name","example":null},"children":{"type":"array","description":"Sub-categories","items":{"description":"Category response"}},"createdAt":{"type":"string","format":"date-time","description":"Creation timestamp"},"updatedAt":{"type":"string","format":"date-time","description":"Last update timestamp"}}}}}}}}},"post":{"tags":["Categories"],"summary":"Create a new category","description":"Creates a new document category","operationId":"create_1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryRequest"}}},"required":true},"responses":{"201":{"description":"Category created successfully","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CategoryResponse"}}}},"400":{"description":"Invalid request data","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CategoryResponse"}}}},"409":{"description":"Category with this name already exists","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CategoryResponse"}}}}}}},"/api/tags/{id}":{"get":{"tags":["Tags"],"summary":"Get a tag by ID","description":"Returns a tag by its ID","operationId":"getById_2","parameters":[{"name":"id","in":"path","description":"Tag ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Tag found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TagResponse"}}}},"404":{"description":"Tag not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/TagResponse"}}}}}},"delete":{"tags":["Tags"],"summary":"Delete a tag","description":"Deletes a tag","operationId":"delete_2","parameters":[{"name":"id","in":"path","description":"Tag ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Tag deleted successfully"},"404":{"description":"Tag not found"}}}},"/api/documents/{id}/download":{"get":{"tags":["Documents"],"summary":"Download document","description":"Downloads the document file","operationId":"download","parameters":[{"name":"id","in":"path","description":"Document ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"File content","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}},"404":{"description":"Document not found","content":{"*/*":{"schema":{"type":"string","format":"byte"}}}}}}},"/api/documents/{id}/download-url":{"get":{"tags":["Documents"],"summary":"Get download URL","description":"Returns a presigned URL for downloading the document","operationId":"getDownloadUrl","parameters":[{"name":"id","in":"path","description":"Document ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Download URL","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}},"404":{"description":"Document not found","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/api/documents/{documentId}/versions/{versionNumber}":{"get":{"tags":["Document Versions"],"summary":"Get specific version","description":"Returns details of a specific version","operationId":"getVersion","parameters":[{"name":"documentId","in":"path","description":"Document ID","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"versionNumber","in":"path","description":"Version number","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"Version details","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentVersionResponse"}}}},"404":{"description":"Document or version not found","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DocumentVersionResponse"}}}}}}},"/api/documents/{documentId}/versions/{versionNumber}/download":{"get":{"tags":["Document Versions"],"summary":"Download version","description":"Downloads a specific version of the document","operationId":"downloadVersion","parameters":[{"name":"documentId","in":"path","description":"Document ID","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"versionNumber","in":"path","description":"Version number","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"File content","content":{"*/*":{"schema":{"type":"string","format":"binary"}}}},"404":{"description":"Document or version not found","content":{"*/*":{"schema":{"type":"string","format":"byte"}}}}}}},"/api/documents/{documentId}/versions/{versionNumber}/download-url":{"get":{"tags":["Document Versions"],"summary":"Get version download URL","description":"Returns a presigned URL for downloading a specific version","operationId":"getVersionDownloadUrl","parameters":[{"name":"documentId","in":"path","description":"Document ID","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"versionNumber","in":"path","description":"Version number","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"Download URL","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}},"404":{"description":"Document or version not found","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"string"}}}}}}}},"/api/documents/shared-with/{userId}":{"get":{"tags":["Document Sharing"],"summary":"Get shares with user","description":"Returns all documents shared with a specific user","operationId":"getSharesWithUser","parameters":[{"name":"userId","in":"path","description":"User ID to check","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"List of shares","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DocumentShareResponse"}}}}}}}},"/api/documents/shared-with-me":{"get":{"tags":["Document Sharing"],"summary":"Get documents shared with me","description":"Returns all documents shared with the current user","operationId":"getSharedWithMe","responses":{"200":{"description":"List of shared documents","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DocumentShareResponse"}}}}}}}},"/api/documents/public":{"get":{"tags":["Documents"],"summary":"Get public documents","description":"Returns all public documents","operationId":"getPublic","responses":{"200":{"description":"List of public documents","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DocumentResponse"}}}}}}}},"/api/documents/my":{"get":{"tags":["Documents"],"summary":"Get my documents","description":"Returns documents uploaded by the current user","operationId":"getMyDocuments","responses":{"200":{"description":"List of user's documents","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DocumentResponse"}}}}}}}},"/api/documents/category/{categoryId}":{"get":{"tags":["Documents"],"summary":"Get documents by category","description":"Returns all documents in a category","operationId":"getByCategory","parameters":[{"name":"categoryId","in":"path","description":"Category ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"List of documents","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DocumentResponse"}}}}},"404":{"description":"Category not found","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/DocumentResponse"}}}}}}}},"/api/categories/tree":{"get":{"tags":["Categories"],"summary":"Get category tree","description":"Returns the complete category hierarchy as a tree","operationId":"getTree","responses":{"200":{"description":"Category tree","content":{"*/*":{"schema":{"type":"array","items":{"type":"object","description":"Category response","properties":{"id":{"type":"integer","format":"int64","description":"Category ID","example":1},"name":{"type":"string","description":"Category name","example":"Comptabilité"},"description":{"type":"string","description":"Category description","example":"Documents comptables et financiers"},"parentCategoryId":{"type":"integer","format":"int64","description":"Parent category ID","example":null},"parentCategoryName":{"type":"string","description":"Parent category name","example":null},"children":{"type":"array","description":"Sub-categories","items":{"description":"Category response"}},"createdAt":{"type":"string","format":"date-time","description":"Creation timestamp"},"updatedAt":{"type":"string","format":"date-time","description":"Last update timestamp"}}}}}}}}}},"/api/categories/root":{"get":{"tags":["Categories"],"summary":"Get root categories","description":"Returns only top-level categories without parents","operationId":"getRootCategories","responses":{"200":{"description":"List of root categories","content":{"*/*":{"schema":{"type":"array","items":{"type":"object","description":"Category response","properties":{"id":{"type":"integer","format":"int64","description":"Category ID","example":1},"name":{"type":"string","description":"Category name","example":"Comptabilité"},"description":{"type":"string","description":"Category description","example":"Documents comptables et financiers"},"parentCategoryId":{"type":"integer","format":"int64","description":"Parent category ID","example":null},"parentCategoryName":{"type":"string","description":"Parent category name","example":null},"children":{"type":"array","description":"Sub-categories","items":{"description":"Category response"}},"createdAt":{"type":"string","format":"date-time","description":"Creation timestamp"},"updatedAt":{"type":"string","format":"date-time","description":"Last update timestamp"}}}}}}}}}},"/api/documents/{id}/metadata/{key}":{"delete":{"tags":["Documents"],"summary":"Delete metadata key","description":"Deletes a specific metadata key","operationId":"deleteMetadataKey","parameters":[{"name":"id","in":"path","description":"Document ID","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"key","in":"path","description":"Metadata key","required":true,"schema":{"type":"string"}}],"responses":{"204":{"description":"Metadata key deleted"},"404":{"description":"Document not found"}}}}},"components":{"schemas":{"DocumentUpdateRequest":{"type":"object","description":"Request for updating a document","properties":{"title":{"type":"string","description":"Document title","example":"Facture 2024-001 - Updated","maxLength":255,"minLength":0},"description":{"type":"string","description":"Document description","example":"Facture de janvier 2024 - corrigée","maxLength":2000,"minLength":0},"categoryId":{"type":"integer","format":"int64","description":"Category ID","example":2},"isPublic":{"type":"boolean","description":"Make document public","example":true},"tags":{"type":"array","description":"Tags to associate with the document","example":["facture","2024","corrigé"],"items":{"type":"string"}}}},"DocumentResponse":{"type":"object","description":"Document response","properties":{"id":{"type":"integer","format":"int64","description":"Document ID","example":1},"title":{"type":"string","description":"Document title","example":"Facture 2024-001"},"description":{"type":"string","description":"Document description","example":"Facture de janvier 2024"},"fileName":{"type":"string","description":"Original file name","example":"facture_2024_001.pdf"},"fileSize":{"type":"integer","format":"int64","description":"File size in bytes","example":102400},"mimeType":{"type":"string","description":"MIME type","example":"application/pdf"},"categoryId":{"type":"integer","format":"int64","description":"Category ID","example":1},"categoryName":{"type":"string","description":"Category name","example":"Comptabilité"},"uploadedBy":{"type":"string","description":"Uploaded by user ID","example":"user123"},"isPublic":{"type":"boolean","description":"Is document public","example":false},"version":{"type":"integer","format":"int32","description":"Current version number","example":1},"checksum":{"type":"string","description":"File checksum (SHA-256)","example":"abc123..."},"tags":{"type":"array","description":"Associated tags","items":{"$ref":"#/components/schemas/TagResponse"}},"metadata":{"type":"object","additionalProperties":{"type":"string"},"description":"Custom metadata"},"downloadUrl":{"type":"string","description":"Download URL (presigned)"},"createdAt":{"type":"string","format":"date-time","description":"Creation timestamp"},"updatedAt":{"type":"string","format":"date-time","description":"Last update timestamp"}}},"TagResponse":{"type":"object","description":"Tag response","properties":{"id":{"type":"integer","format":"int64","description":"Tag ID","example":1},"name":{"type":"string","description":"Tag name","example":"facture"},"createdAt":{"type":"string","format":"date-time","description":"Creation timestamp"}}},"MetadataRequest":{"type":"object","description":"Request for setting document metadata","properties":{"metadata":{"type":"object","additionalProperties":{"type":"string"},"description":"Key-value pairs of metadata","example":{"author":"John Doe","department":"Finance"},"minProperties":1}},"required":["metadata"]},"DocumentShareRequest":{"type":"object","description":"Request for sharing a document","properties":{"sharedWith":{"type":"string","description":"User ID to share with","example":"user456","maxLength":100,"minLength":0},"permission":{"type":"string","description":"Permission level","enum":["READ","WRITE"],"example":"READ","pattern":"^(READ|WRITE)$"},"expiresAt":{"type":"string","format":"date-time","description":"Expiration date (null for no expiration)"}},"required":["sharedWith"]},"DocumentShareResponse":{"type":"object","description":"Document share response","properties":{"id":{"type":"integer","format":"int64","description":"Share ID","example":1},"documentId":{"type":"integer","format":"int64","description":"Document ID","example":1},"documentTitle":{"type":"string","description":"Document title","example":"Facture 2024-001"},"sharedWith":{"type":"string","description":"Shared with user ID","example":"user456"},"permission":{"type":"string","description":"Permission level","example":"READ"},"expiresAt":{"type":"string","format":"date-time","description":"Expiration date"},"isActive":{"type":"boolean","description":"Is share still active"},"createdBy":{"type":"string","description":"Created by user ID","example":"user123"},"createdAt":{"type":"string","format":"date-time","description":"Creation timestamp"}}},"CategoryRequest":{"type":"object","description":"Request for creating or updating a category","properties":{"name":{"type":"string","description":"Category name","example":"Comptabilité","maxLength":100,"minLength":0},"description":{"type":"string","description":"Category description","example":"Documents comptables et financiers","maxLength":500,"minLength":0},"parentCategoryId":{"type":"integer","format":"int64","description":"Parent category ID for hierarchical structure","example":1}},"required":["name"]},"CategoryResponse":{"type":"object","description":"Category response","properties":{"id":{"type":"integer","format":"int64","description":"Category ID","example":1},"name":{"type":"string","description":"Category name","example":"Comptabilité"},"description":{"type":"string","description":"Category description","example":"Documents comptables et financiers"},"parentCategoryId":{"type":"integer","format":"int64","description":"Parent category ID","example":null},"parentCategoryName":{"type":"string","description":"Parent category name","example":null},"children":{"type":"array","description":"Sub-categories","items":{"description":"Category response"}},"createdAt":{"type":"string","format":"date-time","description":"Creation timestamp"},"updatedAt":{"type":"string","format":"date-time","description":"Last update timestamp"}}},"TagRequest":{"type":"object","description":"Request for creating a tag","properties":{"name":{"type":"string","description":"Tag name","example":"facture","maxLength":50,"minLength":0}},"required":["name"]},"DocumentUploadRequest":{"type":"object","description":"Document metadata","properties":{"title":{"type":"string","description":"Document title","example":"Facture 2024-001","maxLength":255,"minLength":0},"description":{"type":"string","description":"Document description","example":"Facture de janvier 2024","maxLength":2000,"minLength":0},"categoryId":{"type":"integer","format":"int64","description":"Category ID","example":1},"isPublic":{"type":"boolean","description":"Make document public","example":false},"tags":{"type":"array","description":"Tags to associate with the document","example":["facture","2024"],"items":{"type":"string"}}},"required":["title"]},"DocumentVersionUploadRequest":{"type":"object","description":"Version metadata","properties":{"changeDescription":{"type":"string","description":"Description of changes in this version","example":"Fixed typos and updated figures","maxLength":500,"minLength":0}}},"DocumentVersionResponse":{"type":"object","description":"Document version response","properties":{"id":{"type":"integer","format":"int64","description":"Version ID","example":1},"documentId":{"type":"integer","format":"int64","description":"Document ID","example":1},"versionNumber":{"type":"integer","format":"int32","description":"Version number","example":1},"fileName":{"type":"string","description":"File name","example":"document_v1.pdf"},"fileSize":{"type":"integer","format":"int64","description":"File size in bytes","example":102400},"uploadedBy":{"type":"string","description":"Uploaded by user ID","example":"user123"},"changeDescription":{"type":"string","description":"Description of changes","example":"Updated formatting"},"checksum":{"type":"string","description":"File checksum (SHA-256)"},"downloadUrl":{"type":"string","description":"Download URL (presigned)"},"createdAt":{"type":"string","format":"date-time","description":"Creation timestamp"}}},"DocumentSearchRequest":{"type":"object","description":"Search criteria for documents","properties":{"query":{"type":"string","description":"Search query (searches in title, description, file name)","example":"facture"},"categoryId":{"type":"integer","format":"int64","description":"Filter by category ID","example":1},"uploadedBy":{"type":"string","description":"Filter by uploader user ID","example":"user123"},"tag":{"type":"string","description":"Filter by tag name","example":"comptabilité"}}}},"securitySchemes":{"bearerAuth":{"type":"http","description":"JWT Token (sans le préfixe 'Bearer')","name":"bearerAuth","scheme":"bearer","bearerFormat":"JWT"}}}}