{"openapi":"3.1.0","info":{"title":"Referentiel Service API","description":"Service de gestion des référentiels - Clients, fournisseurs, produits et familles de produits. Toutes les requêtes passent via la Gateway.","contact":{"name":"COMPTA Team","email":"support@compta.tn"},"version":"1.0.0"},"servers":[{"url":"http://localhost:8080/referentiel","description":"API Gateway"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"Fournisseurs","description":"Gestion des fournisseurs"},{"name":"Clients","description":"Gestion des clients"},{"name":"Produits","description":"Gestion des produits et services"},{"name":"Familles Produits","description":"Gestion des familles de produits"}],"paths":{"/api/companies/{companyId}/produits/{id}":{"get":{"tags":["Produits"],"summary":"Récupérer un produit","description":"Récupère un produit par son ID","operationId":"getById","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProduitResponse"}}}}},"security":[{"bearer-jwt":[]}]},"put":{"tags":["Produits"],"summary":"Mettre à jour un produit","description":"Met à jour un produit existant","operationId":"update","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProduitRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProduitResponse"}}}}},"security":[{"bearer-jwt":[]}]},"delete":{"tags":["Produits"],"summary":"Supprimer un produit","description":"Supprime un produit","operationId":"delete","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}},"security":[{"bearer-jwt":[]}]}},"/api/companies/{companyId}/fournisseurs/{id}":{"get":{"tags":["Fournisseurs"],"summary":"Récupérer un fournisseur","description":"Récupère un fournisseur par son ID","operationId":"getById_1","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/FournisseurResponse"}}}}},"security":[{"bearer-jwt":[]}]},"put":{"tags":["Fournisseurs"],"summary":"Mettre à jour un fournisseur","description":"Met à jour un fournisseur existant","operationId":"update_1","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FournisseurRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/FournisseurResponse"}}}}},"security":[{"bearer-jwt":[]}]},"delete":{"tags":["Fournisseurs"],"summary":"Supprimer un fournisseur","description":"Supprime un fournisseur","operationId":"delete_1","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}},"security":[{"bearer-jwt":[]}]}},"/api/companies/{companyId}/familles-produits/{id}":{"get":{"tags":["Familles Produits"],"summary":"Récupérer une famille produit","description":"Récupère une famille de produits par son ID","operationId":"getById_2","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/FamilleProduitResponse"}}}}},"security":[{"bearer-jwt":[]}]},"put":{"tags":["Familles Produits"],"summary":"Mettre à jour une famille produit","description":"Met à jour une famille de produits existante","operationId":"update_2","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FamilleProduitRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/FamilleProduitResponse"}}}}},"security":[{"bearer-jwt":[]}]},"delete":{"tags":["Familles Produits"],"summary":"Supprimer une famille produit","description":"Supprime une famille de produits","operationId":"delete_2","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}},"security":[{"bearer-jwt":[]}]}},"/api/companies/{companyId}/clients/{id}":{"get":{"tags":["Clients"],"summary":"Récupérer un client","description":"Récupère un client par son ID","operationId":"getById_3","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ClientResponse"}}}}},"security":[{"bearer-jwt":[]}]},"put":{"tags":["Clients"],"summary":"Mettre à jour un client","description":"Met à jour un client existant","operationId":"update_3","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ClientResponse"}}}}},"security":[{"bearer-jwt":[]}]},"delete":{"tags":["Clients"],"summary":"Supprimer un client","description":"Supprime un client","operationId":"delete_3","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK"}},"security":[{"bearer-jwt":[]}]}},"/api/companies/{companyId}/produits":{"get":{"tags":["Produits"],"summary":"Lister tous les produits","description":"Récupère tous les produits de l'entreprise","operationId":"getAll","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ProduitResponse"}}}}}},"security":[{"bearer-jwt":[]}]},"post":{"tags":["Produits"],"summary":"Créer un produit","description":"Crée un nouveau produit pour l'entreprise spécifiée","operationId":"create","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProduitRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProduitResponse"}}}}},"security":[{"bearer-jwt":[]}]}},"/api/companies/{companyId}/fournisseurs":{"get":{"tags":["Fournisseurs"],"summary":"Lister tous les fournisseurs","description":"Récupère tous les fournisseurs de l'entreprise","operationId":"getAll_1","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FournisseurResponse"}}}}}},"security":[{"bearer-jwt":[]}]},"post":{"tags":["Fournisseurs"],"summary":"Créer un fournisseur","description":"Crée un nouveau fournisseur pour l'entreprise spécifiée","operationId":"create_1","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FournisseurRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/FournisseurResponse"}}}}},"security":[{"bearer-jwt":[]}]}},"/api/companies/{companyId}/familles-produits":{"get":{"tags":["Familles Produits"],"summary":"Lister toutes les familles produits","description":"Récupère toutes les familles de produits de l'entreprise","operationId":"getAll_2","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FamilleProduitResponse"}}}}}},"security":[{"bearer-jwt":[]}]},"post":{"tags":["Familles Produits"],"summary":"Créer une famille produit","description":"Crée une nouvelle famille de produits pour l'entreprise spécifiée","operationId":"create_2","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FamilleProduitRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/FamilleProduitResponse"}}}}},"security":[{"bearer-jwt":[]}]}},"/api/companies/{companyId}/clients":{"get":{"tags":["Clients"],"summary":"Lister tous les clients","description":"Récupère tous les clients de l'entreprise","operationId":"getAll_3","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ClientResponse"}}}}}},"security":[{"bearer-jwt":[]}]},"post":{"tags":["Clients"],"summary":"Créer un client","description":"Crée un nouveau client pour l'entreprise spécifiée","operationId":"create_3","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ClientResponse"}}}}},"security":[{"bearer-jwt":[]}]}},"/api/companies/{companyId}/produits/famille/{familleId}":{"get":{"tags":["Produits"],"summary":"Lister les produits par famille","description":"Récupère tous les produits d'une famille","operationId":"getByFamille","parameters":[{"name":"companyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"familleId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ProduitResponse"}}}}}},"security":[{"bearer-jwt":[]}]}}},"components":{"schemas":{"ProduitRequest":{"type":"object","description":"Request to create or update a produit","properties":{"reference":{"type":"string","description":"Référence unique du produit","maxLength":50,"minLength":0},"designation":{"type":"string","description":"Désignation du produit","maxLength":255,"minLength":0},"description":{"type":"string","description":"Description"},"prixAchat":{"type":"number","description":"Prix d'achat"},"prixVente":{"type":"number","description":"Prix de vente"},"tauxTva":{"type":"number","description":"Taux TVA"},"unite":{"type":"string","description":"Unité","maxLength":20,"minLength":0},"typeStock":{"type":"string","description":"Type de stock: STOCKABLE ou NON_STOCKABLE","enum":["STOCKABLE","NON_STOCKABLE"]},"typeArticle":{"type":"string","description":"Type d'article: PRODUIT ou SERVICE","enum":["PRODUIT","SERVICE"]},"familleId":{"type":"integer","format":"int64","description":"ID de la famille"},"actif":{"type":"boolean","description":"Actif"}},"required":["designation","reference","typeArticle","typeStock"]},"ProduitResponse":{"type":"object","description":"Produit response","properties":{"id":{"type":"integer","format":"int64","description":"ID du produit"},"reference":{"type":"string","description":"Référence unique du produit"},"designation":{"type":"string","description":"Désignation du produit"},"description":{"type":"string","description":"Description"},"prixAchat":{"type":"number","description":"Prix d'achat"},"prixVente":{"type":"number","description":"Prix de vente"},"tauxTva":{"type":"number","description":"Taux TVA"},"unite":{"type":"string","description":"Unité"},"typeStock":{"type":"string","description":"Type de stock"},"typeArticle":{"type":"string","description":"Type d'article"},"familleId":{"type":"integer","format":"int64","description":"ID de la famille"},"entrepriseId":{"type":"integer","format":"int64","description":"ID de l'entreprise"},"actif":{"type":"boolean","description":"Actif"},"createdAt":{"type":"string","format":"date-time","description":"Date de création"},"updatedAt":{"type":"string","format":"date-time","description":"Date de mise à jour"}}},"FournisseurRequest":{"type":"object","description":"Request to create or update a fournisseur","properties":{"code":{"type":"string","description":"Code unique du fournisseur","maxLength":50,"minLength":0},"raisonSociale":{"type":"string","description":"Raison sociale","maxLength":255,"minLength":0},"matriculeFiscal":{"type":"string","description":"Matricule fiscal","maxLength":50,"minLength":0},"adresse":{"type":"string","description":"Adresse"},"ville":{"type":"string","description":"Ville","maxLength":100,"minLength":0},"codePostal":{"type":"string","description":"Code postal","maxLength":10,"minLength":0},"telephone":{"type":"string","description":"Téléphone","maxLength":20,"minLength":0},"email":{"type":"string","description":"Email","maxLength":100,"minLength":0},"actif":{"type":"boolean","description":"Actif"}},"required":["code","raisonSociale"]},"FournisseurResponse":{"type":"object","description":"Fournisseur response","properties":{"id":{"type":"integer","format":"int64","description":"ID du fournisseur"},"code":{"type":"string","description":"Code unique du fournisseur"},"raisonSociale":{"type":"string","description":"Raison sociale"},"matriculeFiscal":{"type":"string","description":"Matricule fiscal"},"adresse":{"type":"string","description":"Adresse"},"ville":{"type":"string","description":"Ville"},"codePostal":{"type":"string","description":"Code postal"},"telephone":{"type":"string","description":"Téléphone"},"email":{"type":"string","description":"Email"},"entrepriseId":{"type":"integer","format":"int64","description":"ID de l'entreprise"},"actif":{"type":"boolean","description":"Actif"},"createdAt":{"type":"string","format":"date-time","description":"Date de création"},"updatedAt":{"type":"string","format":"date-time","description":"Date de mise à jour"}}},"FamilleProduitRequest":{"type":"object","description":"Request to create or update a famille produit","properties":{"code":{"type":"string","description":"Code unique de la famille","maxLength":50,"minLength":0},"libelle":{"type":"string","description":"Libellé de la famille","maxLength":255,"minLength":0},"description":{"type":"string","description":"Description"},"actif":{"type":"boolean","description":"Actif"}},"required":["code","libelle"]},"FamilleProduitResponse":{"type":"object","description":"Famille produit response","properties":{"id":{"type":"integer","format":"int64","description":"ID de la famille"},"code":{"type":"string","description":"Code unique de la famille"},"libelle":{"type":"string","description":"Libellé de la famille"},"description":{"type":"string","description":"Description"},"entrepriseId":{"type":"integer","format":"int64","description":"ID de l'entreprise"},"actif":{"type":"boolean","description":"Actif"},"createdAt":{"type":"string","format":"date-time","description":"Date de création"},"updatedAt":{"type":"string","format":"date-time","description":"Date de mise à jour"}}},"ClientRequest":{"type":"object","description":"Request to create or update a client","properties":{"code":{"type":"string","description":"Code unique du client","maxLength":50,"minLength":0},"raisonSociale":{"type":"string","description":"Raison sociale","maxLength":255,"minLength":0},"matriculeFiscal":{"type":"string","description":"Matricule fiscal","maxLength":50,"minLength":0},"adresse":{"type":"string","description":"Adresse"},"ville":{"type":"string","description":"Ville","maxLength":100,"minLength":0},"codePostal":{"type":"string","description":"Code postal","maxLength":10,"minLength":0},"telephone":{"type":"string","description":"Téléphone","maxLength":20,"minLength":0},"email":{"type":"string","description":"Email","maxLength":100,"minLength":0},"typeClient":{"type":"string","description":"Type de client: PARTICULIER ou ENTREPRISE","enum":["PARTICULIER","ENTREPRISE"],"minLength":1},"actif":{"type":"boolean","description":"Actif"}},"required":["code","raisonSociale","typeClient"]},"ClientResponse":{"type":"object","description":"Client response","properties":{"id":{"type":"integer","format":"int64","description":"ID du client"},"code":{"type":"string","description":"Code unique du client"},"raisonSociale":{"type":"string","description":"Raison sociale"},"matriculeFiscal":{"type":"string","description":"Matricule fiscal"},"adresse":{"type":"string","description":"Adresse"},"ville":{"type":"string","description":"Ville"},"codePostal":{"type":"string","description":"Code postal"},"telephone":{"type":"string","description":"Téléphone"},"email":{"type":"string","description":"Email"},"typeClient":{"type":"string","description":"Type de client"},"entrepriseId":{"type":"integer","format":"int64","description":"ID de l'entreprise"},"actif":{"type":"boolean","description":"Actif"},"createdAt":{"type":"string","format":"date-time","description":"Date de création"},"updatedAt":{"type":"string","format":"date-time","description":"Date de mise à jour"}}}},"securitySchemes":{"bearerAuth":{"type":"http","description":"JWT Token (sans le préfixe 'Bearer')","name":"bearerAuth","scheme":"bearer","bearerFormat":"JWT"}}}}